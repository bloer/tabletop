<!--
   index.html
   
   Copyright 2015 Ben Loer 
   
   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.
   
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
   
   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
   MA 02110-1301, USA.
   
   
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<title>Virtual Tabletop 0.6.3</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="generator" content="Geany 0.21" />
  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="jquery.ui.touch-punch.min.js"></script>
  <script src="tabletopclient.js"></script>
  
  <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.11.2/themes/mint-choc/jquery-ui.css">
  
  <style>
    #main {width:1200px; height:700px}
    #whiteboard-container {/*width:1050px;*/ height:100%; float:left; border:1px solid blue; z-index:-1}
    #sideboard {width:145px; height:100%; float:right}
    #sideboard input[type='text'],label {width:120px}
    #whiteboard {z-index:0}
    div.circle {border-radius:50%}
    .marker {width:50px; height:50px;position:absolute; z-index:5; text-align:center; border:0px solid blue;cursor:move;}
    
    .marker img {width:inherit; border:1px solid black }
    .marker.threed {/*-webkit-transform:rotate3d(1,1,0,45deg); transform:rotate3d(1,1,0,45deg);*/
                    -webkit-transform:skew(10deg,10deg);transform:skew(10deg,10deg);
                    border-width:2px 3px 1px 1px; border-style:solid; border-color:black}
    .markerbody {width:100%;height:100%; border:0px solid black;
        background-repeat:no-repeat; background-size:cover; border-radius:inherit}
    .markerbase { background-color:none; width:inherit; border:0px solid black;
         text-align:center;vertical-align:middle}
    .marker.threed .markerbase {-webkit-transform:skewX(-45deg);transform:skewX(-45deg);position:relative; left:-10px;top:0px; border-style:solid; bprder-color:black; border-width:1px 3px 3px 1px; background-color:white; min-height:1.1em}
    .markerlabel {/*font-size:100px;*/ padding:0; position:absolute; text-align:center; transform-origin:center; white-space:nowrap; }
    /*canvas {position:absolute} */
    #trashcan{ width:60px; height:60px;  
      background-image:url("Trash_Can-128.png"); background-size:cover}
    #messages {width:850px; height:150px; overflow:scroll; clear:both;}
    #bgimagecrop {background-color:gray}
    #uncroppedbg {max-width:100%;max-height:80%}
    #cropselector {border:2px solid black; position:absolute;}
    .notransform { -webkit-transform:none !important; transform:none !important; }
    #releasenotes {display:none}
    .layercontrol.active {background-color:#aaffff}
    .layercontrol td:not(first-child) { text-align:center} 
    table {border-collapse: collapse;}
    #chooseloadgame { text-align:center }
    #gameslist {margin:auto}
    #gameslist th,#gameslist td {padding-left:20px; padding-right:20px; border-bottom:1px solid white}
    .savedgame {cursor:pointer}
    #sideboard h3 {margin-top:2px; margin-bottom: 2px; padding-top:0; padding-bottom:0,
                    font-size:smaller; font-weight:bold; text-decoration:underline}
    #sideboard h3::before {content:"-- "}
    #sideboard h3::after {content:" --"}
</style>
</head>

<body>
	<h1>Virtual Tabletop 0.6.3</h1>
  <div id="main">
    <div id="whiteboard-container">
      <canvas id="whiteboard" width="1050" height="700"></canvas>
    </div>
    <div id="sideboard">
      <!--
      <a href="javascript:void(0)" onclick="return showreleasenotes();">New features!</a>
      -->
      <div id="markercontrols">
        <h3>Markers</h3>
        <form id="addmarker" action="javascript:addmarker();">
          <label for="addmarkerbg">URL or color</label><br>
          <input type="text" id="addmarkerbg"><br>
          <label for="addmarkerfile">or file</label>
          <input type="file" id="addmarkerfile" accept="image/*" data-target="addmarkerbg" onchange="convertFile(this)">
          <label for="addmarkerlabel">Label (optional)</label><br>
          <input type="text" id="addmarkerlabel">
          <input type="checkbox" id="addmarkercirc" value="circle" name="circle">
          <label for="addmarkercirc">Circle</label>
          <input type="checkbox" id="addmarker3d" value="threed" name="threed">
          <label for="addmarker3d">3d effect</label>
          <button >Add new marker</button>
        </form>
        <div id="trashcan"></div>
      </div>
      
      
      <div id="drawcontrols">
        <h3>Whiteboard</h3>
        <label for="drawcolor">Draw Color: </label>
        <input type="color" id="drawcolor" value="#ff0000">
        
        <table id="layercontrols">
          <thead>
            <tr><th>Layer</th><th>Show</th><th>Erase</th><th>Delete</th></tr>
          </thead>
          <tbody></tbody>
        </table>
        <form id="addlayer" action="javascript:void(0)" onsubmit="javascript:addlayer();">
          <input type="text" id="newlayername"> 
          <button>Add Layer</button>
        </form>
        
      </div>
     
      <div id="bgcontrols">
        <h3>Background</h3>
        <form id="setbackground" action="javascript:void(0)" onsubmit="javascript:setbackground();">
          <label for="setbackgroundbg">URL or color</label>
          <input type="text" id="setbackgroundbg"><br>
          <label for="setbackgroundfile">or file</label>
          <input type="file" id="setbackgroundfile" accept="image/*" data-target="setbackgroundbg" onchange="convertFile(this)">
          <button>Set background</button>
        </form>
        <button onclick="clearmaskzone_interactive()">Clear mask zone</button>
      </div>
     
      <div id="savecontrols">
        <h3>Save/Load</h3>
        <form id="saveform" action="javascript:void(0);" onsubmit="javascript:savegame();">
          <label for="savename">Save name:</label>
          <input type="text" id="savename">
          <input type="checkbox" id="saveoverwrite" checked="true">
          <label for="saveoverwrite">Overwrite?</label>
          <button>Save game</button>
        </form>
        
        <button onclick="loadgame()">Load game</button>
      </div>
      
    </div>
  <div id="messages"></div>
  </div>
  
  <div id="bgimagecrop">
    <form id="bgimagecropform" action="javascript:setbackgroundcropping();">
      <!--
      Scaling method: 
      <input type="radio" id="fillmax" name="fillmethod" value="maximize"><label for="fillmax">Maximize</label>
      <input type="radio" id="fillstretch" name="fillmethod" value="maximize" checked="true"><label for="fillstretch">Stretch</label>
      <br>
      -->
      Crop the background image if you want, then hit <button>OK</button> <br>
      <input type="checkbox" value="applymask" checked="true" name="applymask" id="applymask">
      <label for="applymask">Apply mask?</label><br>
      <div id="cropdiv">
        <img id="uncroppedbg" />
      </div>
    </form>
  </div>
  
  <div id="chooseloadgame">
    <table id="gameslist">
      <thead>
        <tr><th>Name</th><th>Created</th></tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
  
  <div id="releasenotes">
    <h4>New features in version 0.5</h4>
    <h4>New features in version 0.3</h4>
    <ul>
      <li>Hold down ctrl key and drag to clone a marker</li>
      <li>Double click on a marker to edit the label</li>
      <li>Upload marker or background images from local files (or drag and drop)</li>
      <li>Crop background images after uploading</li>
      <li>Miscellaneous bug fixes, including
        <ul>
          <li>Label text scales with the marker</li>
          <li>Drawing won't end when you move over a marker</li>
          <li>Lines won't jump when two people draw at same time</li>
        </ul>
      </li>
    </ul>
  </div>
  
</body>

</html>
